--- redhat-menus-7.8.9/menus/preferences.menu.cc-shell	2007-01-23 14:47:48.000000000 -0500
+++ redhat-menus-7.8.9/menus/preferences.menu	2007-01-23 14:48:04.000000000 -0500
@@ -3,78 +3,108 @@
 
 <Menu>
   <Name>Preferences</Name>
-  <Directory>Settings.directory</Directory>
-
-  <!-- Scan legacy dirs first, as later items take priority -->
-  <LegacyDir>/usr/share/gnome/apps</LegacyDir>
-  <LegacyDir>/etc/X11/applnk</LegacyDir>
+  <Directory>Preferences.directory</Directory>
 
   <!-- Read standard .directory and .desktop file locations -->
   <DefaultAppDirs/>
   <DefaultDirectoryDirs/>
 
-  <!-- Read in overrides and child menus from preferences.d -->
+  <!-- Read in overrides and child menus from preferences-merged/ -->
   <DefaultMergeDirs/>
 
   <!-- Stuff in the toplevel -->
   <Include>
     <And>
       <Category>Settings</Category>
-      <Category>X-Red-Hat-Base</Category>
       <Not>
         <Or>
+          <Category>PersonalSettings</Category>
+          <Category>DesktopSettings</Category>
+          <Category>NetworkSettings</Category>
+          <Category>HardwareSettings</Category>
+          <Category>SystemSettings</Category>
           <Category>System</Category>
-	  <Category>Accessibility</Category>
         </Or>
       </Not>
     </And>
   </Include>
 
+  <!-- Menu items to exclude from the toplevel -->
   <Exclude>
-      <Filename>redhat-userpasswd.desktop</Filename>
+    <Filename>gnomecc.desktop</Filename>
   </Exclude>
 
-  <!-- Accessibility -->
+  <!-- Personal submenu -->
   <Menu>
-    <Name>Accessibility</Name>
-    <Directory>Settings-Accessibility.directory</Directory>
+    <Name>Personal</Name>
+    <Directory>Personal.directory</Directory>
     <Include>
       <And>
         <Category>Settings</Category>
-        <Category>Accessibility</Category>
-        <Not>
-          <Or>
-            <Category>System</Category>
-          </Or>
-        </Not>
+        <Category>PersonalSettings</Category>
       </And>
     </Include>
-  </Menu>
+  </Menu> <!-- End Personal -->
 
-  <!-- More Prefs -->
+  <!-- Look and Feel submenu -->
+  <Menu>
+    <Name>Look and Feel</Name>
+    <Directory>LookAndFeel.directory</Directory>
+    <Include>
+      <And>
+        <Category>Settings</Category>
+        <Category>DesktopSettings</Category>
+      </And>
+    </Include>
+  </Menu> <!-- End Look and Feel -->
 
+  <!-- Internet and Network submenu -->
   <Menu>
-    <Name>MorePreferences</Name>
-    <Directory>Settings-More.directory</Directory>
+    <Name>Internet and Network</Name>
+    <Directory>InternetAndNetwork.directory</Directory>
     <Include>
       <And>
         <Category>Settings</Category>
-        <Not>
-          <Or>
-            <Category>System</Category>
-            <Category>X-Red-Hat-Base-Only</Category>
-            <Category>X-Red-Hat-Base</Category>
-          </Or>
-        </Not>
+        <Category>NetworkSettings</Category>
       </And>
-      <Filename>gnome-gconf-editor</Filename>
     </Include>
+  </Menu> <!-- End Internet and Network -->
   
-    <Exclude>
-      <Filename>redhat-userinfo.desktop</Filename>
-      <Filename>gnome-gdmphotosetup.desktop</Filename>
-    </Exclude>
+  <!-- Hardware submenu -->
+  <Menu>
+    <Name>Hardware</Name>
+    <Directory>Hardware.directory</Directory>
+    <Include>
+      <And>
+        <Category>Settings</Category>
+        <Category>HardwareSettings</Category>
+      </And>
+    </Include>
+  </Menu> <!-- End Hardware -->
 
-  </Menu>   <!-- End More Prefs -->
-</Menu>     <!-- End Prefs -->
+  <!-- System submenu -->
+  <Menu>
+    <Name>System</Name>
+    <Directory>System.directory</Directory>
+    <Include>
+      <And>
+        <Category>Settings</Category>
+        <Or>
+          <Category>SystemSettings</Category>
+          <And>
+            <Category>System</Category>
+            <Not>
+              <Or>
+                <Category>PersonalSettings</Category>
+                <Category>DesktopSettings</Category>
+                <Category>HardwareSettings</Category>
+                <Category>NetworkSettings</Category> 
+              </Or>
+            </Not>
+          </And>
+        </Or>
+      </And>
+    </Include>
+  </Menu> <!-- End System -->
 
+</Menu>     <!-- End Prefs -->
